{% extends 'addCompare/ajax.html.twig' %}

{% block search_form %}
    <div id="search-form" class="pure-u-1 pure-form pure-form-stacked centered">
        <fieldset class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-3">
            <legend>{% trans with {'{providers}': providers|length} from 'compare' %}search_in_count_provider{% endtrans %}</legend>
            <input type="file" class="pure-button full-width" accept="image/*;capture=camera" onchange="" id="file-selector">
            <input type="hidden" id="isbn_to_search">
            <div id="barcode-fail" class="pure-form-message" hidden>No ISBN/EAN found in the image</div>
            <div id="barcode-success" hidden>
                <div id="barcode-success-message" class="app-search-title">Found the ISBN/EAN <strong></strong></div>
                <button class="pure-button pure-button-primary" onclick="startSearch()">{{ 'Search'|trans({},'compare') }}</button>
            </div>
        </fieldset>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('build/js/scanner.js') }}"></script>
    <script type="application/javascript">
        scanner.initFile('#file-selector', '#barcode-success', '#barcode-fail', '#isbn_to_search', '#barcode-success-message strong');
    </script>
{% endblock %}